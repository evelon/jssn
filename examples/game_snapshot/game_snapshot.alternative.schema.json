{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "schema_version": {
      "type": "integer",
      "minimum": 1
    },
    "case_state": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "case_id": {
          "type": "string",
          "format": "uuid"
        },
        "status": {
          "type": "string",
          "enum": ["RUNNING", "ENDED", "INTERRUPTED"]
        },
        "round_no": {
          "type": "integer",
          "minimum": 0
        }
      },
      "required": ["case_id", "status", "round_no"]
    },
    "phase_state": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "phase_id": {
          "type": "string",
          "format": "uuid"
        },
        "type": {
          "type": "string",
          "enum": ["NIGHT", "DISCUSS", "VOTE"]
        },
        "round": {
          "type": "integer",
          "minimum": 0
        },
        "opened_at": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": ["phase_id", "type", "round", "opened_at"]
    },
    "players": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "seat_no": {
            "type": "integer",
            "minimum": 0,
            "maximum": 7
          },
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 20
          },
          "life": {
            "type": "string",
            "enum": ["ALIVE", "DEAD"]
          },
          "eliminated": {
            "type": "boolean"
          }
        },
        "required": ["id", "seat_no", "name", "life"]
      }
    },
    "vote_meta": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "type": {
            "type": "string",
            "enum": ["RED", "BLUE"]
          },
          "from": {
            "type": "string",
            "format": "uuid"
          },
          "to": {
            "type": "string",
            "format": "uuid"
          },
          "weight": {
            "type": "integer",
            "minimum": 1,
            "maximum": 3
          }
        },
        "required": ["type", "from", "to", "weight"]
      }
    },
    "vote_result": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "vote_type": {
          "type": "string",
          "enum": ["RED", "BLUE"]
        },
        "targeted": {
          "type": "integer",
          "minimum": 0,
          "maximum": 7
        },
        "executed": {
          "type": "boolean"
        }
      },
      "required": ["vote_type", "targeted", "executed"]
    }
  },
  "required": ["schema_version", "case_state", "phase_state", "players"]
}
